<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rolap">
<title>Star Database Export Features • rolap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Star Database Export Features">
<meta property="og:description" content="rolap">
<meta property="og:image" content="https://josesamos.github.io/rolap/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rolap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.5.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/rolap.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/v05-flat-table-op.html">Obtaining and transforming flat tables</a>
    <a class="dropdown-item" href="../articles/v10-rpd.html">Definition of role-playing and role dimensions</a>
    <a class="dropdown-item" href="../articles/v40-refresh.html">Incremental refresh of star databases</a>
    <a class="dropdown-item" href="../articles/v50-deploy.html">Deployment of star databases with incremental refresh</a>
    <a class="dropdown-item" href="../articles/v60-export.html">Star Database Export Features</a>
    <a class="dropdown-item" href="../articles/v70-star_query.html">Performing Multidimensional Queries (also Including Geographic Attributes)</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/josesamos/rolap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="v60-export_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="v60-export_files/viz-1.8.2/viz.js"></script><link href="v60-export_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="v60-export_files/grViz-binding-1.0.10/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Star Database Export Features</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/josesamos/rolap/blob/HEAD/vignettes/v60-export.Rmd" class="external-link"><code>vignettes/v60-export.Rmd</code></a></small>
      <div class="d-none name"><code>v60-export.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Once we developed a star database in R, we would like to exploit it
directly in R to develop multidimensional queries, but that is part of a
future project. Currently we need to export the result to other formats
to be able to use other OLAP query tools.</p>
<p>This document shows the possibilities offered by the package in this
context: Export an object of the <code>star_database</code> class to
other formats. After presenting the object that we will use as an
example and how to select it, a section is dedicated to each type of
element obtained: <code>dm</code>, list of <code>tibble</code> objects,
relational databases, <em>xlsx</em> and <em>csv</em> files, and
<code>geomultistar::multistar</code> object. Finally, it finish with the
conclusions.</p>
</div>
<div class="section level2">
<h2 id="example-star_database-object">Example <code>star_database</code> object<a class="anchor" aria-label="anchor" href="#example-star_database-object"></a>
</h2>
<p>The variable <code>mrs_db</code>, obtained in the vignette titled
<em>Obtaining and transforming flat tables</em>,
<code><a href="../articles/v05-flat-table-op.html">vignette("v05-flat-table-op")</a></code>, contains an object of class
<code>star_database</code> that we will use in the examples.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mrs_db</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "star_database"</span></span></code></pre></div>
<p>We can see a representation of the tables it contains using the
<code><a href="../reference/draw_tables.html">draw_tables()</a></code> function, as shown below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/draw_tables.html">draw_tables</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="grViz html-widget html-fill-item" id="htmlwidget-75e2a83a0a586ef73b07" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-75e2a83a0a586ef73b07">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"mrs_age\" [id = \"mrs_age\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_age<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"who_key\">who_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">all_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"mrs_cause\" [id = \"mrs_cause\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_cause<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">pneumonia_and_influenza_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">all_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when\" [id = \"when\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_key\"><U>when_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"where\" [id = \"where\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">where<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"where_key\"><U>where_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">region<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city_state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">status<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">pop<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">lat<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">long<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"who\" [id = \"who\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">who<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"who_key\"><U>who_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">age<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"mrs_cause\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_cause_1\"]\n\"mrs_age\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_age_1\"]\n\"mrs_cause\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_cause_2\"]\n\"mrs_age\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_age_2\"]\n\"mrs_age\":\"who_key\"->\"who\":\"who_key\" [id=\"mrs_age_3\"]\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="select-only-one-star-database">Select only one star database<a class="anchor" aria-label="anchor" href="#select-only-one-star-database"></a>
</h2>
<p>Strictly speaking, a star database is composed of a fact table and
several associated dimension tables. A constellation is made up of
several star databases that can share dimensions. In the
<code>rolap</code> package they are treated in a unified way under the
<code>star_database</code> class: It is used both to define star
databases and to define constellations.</p>
<p>It is possible that we are interested in exporting only a star
database of the constellation, or a subset of it (also a constellation).
For this reason, in this situation, the first step before performing the
export operation would be to select the star databases that interest us
from the constellation. This operation can be carried out using the
<code><a href="../reference/get_star_database.html">get_star_database()</a></code> function, where the names of the star
databases are indicated. The names can be obtained using the
<code><a href="../reference/get_fact_names.html">get_fact_names()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mrs_db</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/get_fact_names.html">get_fact_names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "mrs_age"   "mrs_cause"</span></span></code></pre></div>
<p>Next, we select one of the star databases (also an object of class
<code>star_database</code>) and display its tables.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mrs_cause</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/get_star_database.html">get_star_database</a></span><span class="op">(</span><span class="st">"mrs_cause"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mrs_cause</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "star_database"</span></span>
<span></span>
<span><span class="va">mrs_cause</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/draw_tables.html">draw_tables</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="grViz html-widget html-fill-item" id="htmlwidget-244c85b97c554c335f72" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-244c85b97c554c335f72">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"mrs_cause\" [id = \"mrs_cause\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_cause<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">pneumonia_and_influenza_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">all_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when\" [id = \"when\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_key\"><U>when_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"where\" [id = \"where\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">where<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"where_key\"><U>where_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">region<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city_state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">status<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">pop<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">lat<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">long<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"mrs_cause\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_cause_1\"]\n\"mrs_cause\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_cause_2\"]\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="dm-class-object">
<code>dm</code> class object<a class="anchor" aria-label="anchor" href="#dm-class-object"></a>
</h2>
<p>The <a href="https://cran.r-project.org/package=dm" class="external-link"><code>dm</code></a> package
allows us to work in R with tables that correspond to others from
relational databases, both to import and export them. It also allows
them to be represented graphically (the graphical representations of the
tables presented in the previous section have been made using the
<code>dm</code> package).</p>
<p>We can directly obtain an object of the <code>dm</code> class from
the tables of our star databases using the <code>as_dm_class</code>()
function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mrs_dm</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_dm_class.html">as_dm_class</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mrs_dm</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "dm"</span></span>
<span></span>
<span><span class="va">mrs_dm</span></span>
<span><span class="co">#&gt; <span style="color: #FFAFFF;">──</span> <span style="color: #FFAFFF;">Metadata</span> <span style="color: #FFAFFF;">────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Tables: `when`, `where`, `who`, `mrs_cause`, `mrs_age`</span></span>
<span><span class="co">#&gt; Columns: 25</span></span>
<span><span class="co">#&gt; Primary keys: 5</span></span>
<span><span class="co">#&gt; Foreign keys: 5</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="list-of-tibble-objects">List of <code>tibble</code> objects<a class="anchor" aria-label="anchor" href="#list-of-tibble-objects"></a>
</h2>
<p>We can generate a <code>tibble</code> list from the component tables
or from the flat tables obtained from them.</p>
<div class="section level3">
<h3 id="from-component-tables">From component tables<a class="anchor" aria-label="anchor" href="#from-component-tables"></a>
</h3>
<p>Using the <code><a href="../reference/as_tibble_list.html">as_tibble_list()</a></code> function, we get a
<code>tibble</code> list with the dimension and fact tables, as shown
below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tl</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_tibble_list.html">as_tibble_list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tl</span></span>
<span><span class="co">#&gt; $when</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,966 × 4</span></span></span>
<span><span class="co">#&gt;    when_key year  week  week_ending_date</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        1 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        2 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        3 1962  <span style="color: #949494;">"</span> 5<span style="color: #949494;">"</span>  02/03/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        4 1962  <span style="color: #949494;">"</span> 6<span style="color: #949494;">"</span>  02/10/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        5 1962  <span style="color: #949494;">"</span> 8<span style="color: #949494;">"</span>  02/24/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        6 1962  <span style="color: #949494;">"</span> 9<span style="color: #949494;">"</span>  03/03/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        7 1962  <span style="color: #949494;">"</span>12<span style="color: #949494;">"</span>  03/24/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        8 1962  <span style="color: #949494;">"</span>14<span style="color: #949494;">"</span>  04/07/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        9 1962  <span style="color: #949494;">"</span>15<span style="color: #949494;">"</span>  04/14/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>       10 1962  <span style="color: #949494;">"</span>18<span style="color: #949494;">"</span>  05/05/1962      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,956 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $where</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 120 × 9</span></span></span>
<span><span class="co">#&gt;    where_key region state city        city_state     status    pop   lat   long </span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 1      CT    Bridgeport  Bridgeport CT  non-capi… <span style="color: #949494;">"</span>  1… 41.2  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 1      CT    Hartford    Hartford CT    state ca… <span style="color: #949494;">"</span>  1… 41.8  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 1      CT    New Haven   New Haven CT   non-capi… <span style="color: #949494;">"</span>  1… 41.3  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 1      CT    Waterbury   Waterbury CT   non-capi… <span style="color: #949494;">"</span>  1… 41.6  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 1      MA    Cambridge   Cambridge MA   non-capi… <span style="color: #949494;">"</span>  1… 42.4  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 1      MA    Fall River  Fall River MA  non-capi… <span style="color: #949494;">"</span>   … 41.7  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 1      MA    Lowell      Lowell MA      non-capi… <span style="color: #949494;">"</span>  1… 42.6  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 1      MA    Lynn        Lynn MA        non-capi… <span style="color: #949494;">"</span>   … 42.5  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 1      MA    New Bedford New Bedford MA non-capi… <span style="color: #949494;">"</span>   … 41.7  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 1      MA    Somerville  Somerville MA  non-capi… <span style="color: #949494;">"</span>   … 42.4  <span style="color: #949494;">"</span> -7…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 110 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $who</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   who_key age        </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1 1-24 years </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2 25-44 years</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3 45-64 years</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4 65+ years  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       5 &lt;1 year    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mrs_cause</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,342 × 5</span></span></span>
<span><span class="co">#&gt;    when_key where_key pneumonia_and_influenza_deaths all_deaths nrow_agg</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        1        87                              2         69        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        2         8                              1         28        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        2        10                              2         21        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        2        64                             10        220        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        2        97                              2         12        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        3        15                              2         32        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        4         6                              0         31        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        4        15                              1         32        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        4       119                              2         51        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        5        36                              0         39        1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3,332 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mrs_age</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16,565 × 5</span></span></span>
<span><span class="co">#&gt;    when_key where_key who_key all_deaths nrow_agg</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>        1        87       1          1        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>        1        87       2          5        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>        1        87       3         17        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>        1        87       4         41        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>        1        87       5          5        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>        2         8       1          0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>        2         8       2          2        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>        2         8       3         11        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>        2         8       4         14        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        2         8       5          1        1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16,555 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="from-flat-tables">From flat tables<a class="anchor" aria-label="anchor" href="#from-flat-tables"></a>
</h3>
<p>Using the <code><a href="../reference/as_single_tibble_list.html">as_single_tibble_list()</a></code> function, we also get
a <code>tibble</code> list but in this case the fact and dimension
tables have been merged to form a flat table as shown below.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tl</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_single_tibble_list.html">as_single_tibble_list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tl</span></span>
<span><span class="co">#&gt; $mrs_cause</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,342 × 14</span></span></span>
<span><span class="co">#&gt;    year  week  week_ending_date region state city  city_state status pop   lat  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962       7      OK    Tulsa Tulsa OK   non-c… <span style="color: #949494;">"</span>  3… 36.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Lynn  Lynn MA    non-c… <span style="color: #949494;">"</span>   … 42.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Some… Somervill… non-c… <span style="color: #949494;">"</span>   … 42.4 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       5      DC    Wash… Washingto… non-c… <span style="color: #949494;">"</span>  5… 38.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       8      CO    Colo… Colorado … non-c… <span style="color: #949494;">"</span>  3… 38.9 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1962  <span style="color: #949494;">"</span> 5<span style="color: #949494;">"</span>  02/03/1962       2      NJ    Eliz… Elizabeth… non-c… <span style="color: #949494;">"</span>  1… 40.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1962  <span style="color: #949494;">"</span> 6<span style="color: #949494;">"</span>  02/10/1962       1      MA    Fall… Fall Rive… non-c… <span style="color: #949494;">"</span>   … 41.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1962  <span style="color: #949494;">"</span> 6<span style="color: #949494;">"</span>  02/10/1962       2      NJ    Eliz… Elizabeth… non-c… <span style="color: #949494;">"</span>  1… 40.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1962  <span style="color: #949494;">"</span> 6<span style="color: #949494;">"</span>  02/10/1962       9      WA    Spok… Spokane WA non-c… <span style="color: #949494;">"</span>  1… 47.7 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1962  <span style="color: #949494;">"</span> 8<span style="color: #949494;">"</span>  02/24/1962       3      IL    Rock… Rockford … non-c… <span style="color: #949494;">"</span>  1… 42.3 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3,332 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: long &lt;chr&gt;, pneumonia_and_influenza_deaths &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   all_deaths &lt;int&gt;, nrow_agg &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mrs_age</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 16,565 × 14</span></span></span>
<span><span class="co">#&gt;    year  week  week_ending_date region state city  city_state status pop   lat  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962       7      OK    Tulsa Tulsa OK   non-c… <span style="color: #949494;">"</span>  3… 36.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962       7      OK    Tulsa Tulsa OK   non-c… <span style="color: #949494;">"</span>  3… 36.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962       7      OK    Tulsa Tulsa OK   non-c… <span style="color: #949494;">"</span>  3… 36.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962       7      OK    Tulsa Tulsa OK   non-c… <span style="color: #949494;">"</span>  3… 36.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1962  <span style="color: #949494;">"</span> 1<span style="color: #949494;">"</span>  01/06/1962       7      OK    Tulsa Tulsa OK   non-c… <span style="color: #949494;">"</span>  3… 36.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Lynn  Lynn MA    non-c… <span style="color: #949494;">"</span>   … 42.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Lynn  Lynn MA    non-c… <span style="color: #949494;">"</span>   … 42.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Lynn  Lynn MA    non-c… <span style="color: #949494;">"</span>   … 42.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Lynn  Lynn MA    non-c… <span style="color: #949494;">"</span>   … 42.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1962  <span style="color: #949494;">"</span> 2<span style="color: #949494;">"</span>  01/13/1962       1      MA    Lynn  Lynn MA    non-c… <span style="color: #949494;">"</span>   … 42.5 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16,555 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: long &lt;chr&gt;, age &lt;chr&gt;, all_deaths &lt;int&gt;, nrow_agg &lt;int&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="relational-database">Relational database<a class="anchor" aria-label="anchor" href="#relational-database"></a>
</h2>
<p>To export the component tables to a relational database, we can use
the <code><a href="../reference/as_rdb.html">as_rdb()</a></code> function. We have to pass it as a parameter a
connection to the database, which we manage.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_rdb.html">as_rdb</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbListTables.html" class="external-link">dbListTables</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "mrs_age"   "mrs_cause" "when"      "where"     "who"</span></span>
<span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></code></pre></div>
<p>Additionally, in the the vignette titled <em>Deployment of star
databases with incremental refresh</em>,
<code><a href="../articles/v50-deploy.html">vignette("v50-deploy")</a></code>, it is described how to deploy a
star database in a relational database so that it is automatically
updated through periodic refresh operations.</p>
</div>
<div class="section level2">
<h2 id="xlsx-file">
<em>xlsx</em> file<a class="anchor" aria-label="anchor" href="#xlsx-file"></a>
</h2>
<p>Using the <code><a href="../reference/as_xlsx_file.html">as_xlsx_file()</a></code> function, we get an
<em>xslx</em> file where each table is stored in a sheet. We have to
indicate the name of the file. For the example, we select a temporary
file.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_xlsx_file.html">as_xlsx_file</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">f</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpiIO69W/file306f148c0c7c.xlsx"</span></span></code></pre></div>
<p>As we can see, it is responsible for assigning the appropriate
extension.</p>
</div>
<div class="section level2">
<h2 id="csv-files">
<em>csv</em> files<a class="anchor" aria-label="anchor" href="#csv-files"></a>
</h2>
<p>Using the <code><a href="../reference/as_csv_files.html">as_csv_files()</a></code> function we can store each
table in a different csv file, in the indicated folder, as shown
below.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_csv_files.html">as_csv_files</a></span><span class="op">(</span>dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">d</span>, pattern <span class="op">=</span> <span class="st">"*.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "mrs_age.csv"   "mrs_cause.csv" "when.csv"      "where.csv"    </span></span>
<span><span class="co">#&gt; [5] "who.csv"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="geomultistarmultistar-object">
<code>geomultistar::multistar</code> object<a class="anchor" aria-label="anchor" href="#geomultistarmultistar-object"></a>
</h2>
<p>Using the <code><a href="../reference/as_multistar.html">as_multistar()</a></code> function we can get a
<code>geomultistar::multistar</code> object; with this object we can use
the query and integration functions with geographic information offered
by the <a href="https://CRAN.R-project.org/package=geomultistar" class="external-link"><code>geomultistar</code></a>
package.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ms</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/as_multistar.html">as_multistar</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ms</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "multistar"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusions">Conclusions<a class="anchor" aria-label="anchor" href="#conclusions"></a>
</h2>
<p>This document presents the functions to export the tables that make
up the star databases to other types of formats.</p>
<p>The objective of these functions is that the <code>rolap</code>
package can be used to transform the data and that other tools can be
easily used to analyse it.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jose Samos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
