<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rolap">
<title>Definition of role-playing and role dimensions â€¢ rolap</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Definition of role-playing and role dimensions">
<meta property="og:description" content="rolap">
<meta property="og:image" content="https://josesamos.github.io/rolap/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rolap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/rolap.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/v05-flat-table-op.html">Obtaining and transforming flat tables</a>
    <a class="dropdown-item" href="../articles/v10-rpd.html">Definition of role-playing and role dimensions</a>
    <a class="dropdown-item" href="../articles/v40-refresh.html">Incremental refresh of star databases</a>
    <a class="dropdown-item" href="../articles/v50-deploy.html">Deployment of star databases with incremental refresh</a>
    <a class="dropdown-item" href="../articles/v60-export.html">Star Database Export Features</a>
    <a class="dropdown-item" href="../articles/v70-star_query.html">Performing Multidimensional Queries with the `rolap` Package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/josesamos/rolap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="v10-rpd_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="v10-rpd_files/viz-1.8.2/viz.js"></script><link href="v10-rpd_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="v10-rpd_files/grViz-binding-1.0.10/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Definition of role-playing and role dimensions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/josesamos/rolap/blob/HEAD/vignettes/v10-rpd.Rmd" class="external-link"><code>vignettes/v10-rpd.Rmd</code></a></small>
      <div class="d-none name"><code>v10-rpd.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>A single dimension can be referenced multiple times in a fact table,
with each reference linked to a different conceptual role. These
separate dimension views are called <em>role dimensions</em> and the
common dimension is called a <em>role-playing dimension</em>.</p>
<p>Depending on the OLAP (<em>On-Line Analytical Processing</em>) query
system that we use, we may be interested in having a single physical
table and defining views on it (one view for each role) or a different
physical table for each role. The <code>rolap</code> package tries to
facilitate the operations to achieve the alternative that we decide to
implement.</p>
<p>This document shows by means of an example the possibilities offered
by the package in this context. First, through a star database, then by
implementing a constellation. Finally, the conclusions are
presented.</p>
</div>
<div class="section level2">
<h2 id="role-playing-and-role-dimensions-in-a-star-database">Role-playing and role dimensions in a star database<a class="anchor" aria-label="anchor" href="#role-playing-and-role-dimensions-in-a-star-database"></a>
</h2>
<p>First of all, we are going to present the starting data, then we will
define the star schema to obtain the star database. Next, we will see
the different possibilities with the role-playing dimension and the
roles.</p>
<div class="section level3">
<h3 id="flat-table-with-the-initial-data">Flat table with the initial data<a class="anchor" aria-label="anchor" href="#flat-table-with-the-initial-data"></a>
</h3>
<p>We use a dataset based on the <a href="https://catalog.data.gov/dataset/deaths-in-122-u-s-cities-1962-2016-122-cities-mortality-reporting-system" class="external-link">Deaths
in 122 U.S. cities - 1962-2016. 122 Cities Mortality Reporting
System</a> dataset. Two additional dates have been generated, which were
not present in the original dataset.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="6%">
<col width="9%">
<col width="9%">
<col width="9%">
<col width="2%">
<col width="2%">
<col width="7%">
<col width="3%">
<col width="3%">
<col width="5%">
<col width="13%">
<col width="5%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="center">Reception Year</th>
<th align="center">Reception Week</th>
<th align="center">Reception Date</th>
<th align="center">Data Availability Year</th>
<th align="center">Data Availability Week</th>
<th align="center">Data Availability Date</th>
<th align="center">Year</th>
<th align="center">WEEK</th>
<th align="center">Week Ending Date</th>
<th align="center">REGION</th>
<th align="center">State</th>
<th align="center">City</th>
<th align="center">Pneumonia and Influenza Deaths</th>
<th align="center">All Deaths</th>
<th align="center">Other Deaths</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
<td align="center">3</td>
<td align="center">46</td>
<td align="center">43</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
<td align="center">11</td>
<td align="center">270</td>
<td align="center">259</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">2</td>
<td align="center">54</td>
<td align="center">52</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
<td align="center">2</td>
<td align="center">43</td>
<td align="center">41</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
<td align="center">12</td>
<td align="center">285</td>
<td align="center">273</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
<td align="center">2</td>
<td align="center">27</td>
<td align="center">25</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">3</td>
<td align="center">63</td>
<td align="center">60</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">1</td>
<td align="center">47</td>
<td align="center">46</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
<td align="center">4</td>
<td align="center">46</td>
<td align="center">42</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
<td align="center">1</td>
<td align="center">40</td>
<td align="center">39</td>
</tr>
</tbody>
</table>
<p>We have selected a small dataset so that the result can be more
easily appreciated. Several columns with time information have been
added so that it is justified to define a time dimension that can play
several roles.</p>
</div>
<div class="section level3">
<h3 id="star-schema">Star schema<a class="anchor" aria-label="anchor" href="#star-schema"></a>
</h3>
<p>To define the schema, we get the table columns as shown below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">ft_cause_rpd</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; c("Reception Year", "Reception Week", "Reception Date", "Data Availability Year", </span></span>
<span><span class="co">#&gt; "Data Availability Week", "Data Availability Date", "Year", "WEEK", </span></span>
<span><span class="co">#&gt; "Week Ending Date", "REGION", "State", "City", "Pneumonia and Influenza Deaths", </span></span>
<span><span class="co">#&gt; "All Deaths", "Other Deaths")</span></span></code></pre></div>
<p>The definition of the star schema is shown below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">when</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dimension_schema.html">dimension_schema</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"When"</span>,</span>
<span>                         attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,</span>
<span>                                        <span class="st">"WEEK"</span>,</span>
<span>                                        <span class="st">"Week Ending Date"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">when_available</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dimension_schema.html">dimension_schema</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"When Available"</span>,</span>
<span>  attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Data Availability Year"</span>,</span>
<span>    <span class="st">"Data Availability Week"</span>,</span>
<span>    <span class="st">"Data Availability Date"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">where</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dimension_schema.html">dimension_schema</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"where"</span>,</span>
<span>                          attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"REGION"</span>,</span>
<span>                                         <span class="st">"State"</span>,</span>
<span>                                         <span class="st">"City"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/star_schema.html">star_schema</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_facts.html">define_facts</a></span><span class="op">(</span><span class="fu"><a href="../reference/fact_schema.html">fact_schema</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"MRS Cause"</span>,</span>
<span>    measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pneumonia and Influenza Deaths"</span>,</span>
<span>                 <span class="st">"All Deaths"</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="va">when</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="va">when_available</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="fu"><a href="../reference/dimension_schema.html">dimension_schema</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"When Received"</span>,</span>
<span>    attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Reception Year"</span>,</span>
<span>                   <span class="st">"Reception Week"</span>,</span>
<span>                   <span class="st">"Reception Date"</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="va">where</span><span class="op">)</span></span></code></pre></div>
<p>As we will define more star schemas with dimensions in common, some
of the dimensions have been defined as variables, to avoid repeating
their definition later.</p>
</div>
<div class="section level3">
<h3 id="star-database">Star database<a class="anchor" aria-label="anchor" href="#star-database"></a>
</h3>
<p>From the star schema and the flat table, we define the star database,
as can be seen below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/star_database.html">star_database</a></span><span class="op">(</span><span class="va">s</span>, <span class="va">ft_cause_rpd</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/snake_case.html">snake_case</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It has been transformed to snake case because it is usually more
appropriate if we work in RDBMS (<em>Relational Database Management
Systems</em>).</p>
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9dd0dd78e1bee5c0f759" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-9dd0dd78e1bee5c0f759">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"mrs_cause\" [id = \"mrs_cause\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_cause<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_available_key\">when_available_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_received_key\">when_received_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">pneumonia_and_influenza_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">all_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when\" [id = \"when\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_key\"><U>when_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_available\" [id = \"when_available\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_available<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_available_key\"><U>when_available_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">data_availability_year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">data_availability_week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">data_availability_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_received\" [id = \"when_received\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_received<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_received_key\"><U>when_received_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">reception_year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">reception_week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">reception_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"where\" [id = \"where\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">where<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"where_key\"><U>where_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">region<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"mrs_cause\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_cause_1\"]\n\"mrs_cause\":\"when_available_key\"->\"when_available\":\"when_available_key\" [id=\"mrs_cause_2\"]\n\"mrs_cause\":\"when_received_key\"->\"when_received\":\"when_received_key\" [id=\"mrs_cause_3\"]\n\"mrs_cause\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_cause_4\"]\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script><p>It can be seen that the tables associated with the dimension
<em>when</em> (<em>when</em>, <em>when_available</em>,
<em>when_received</em>) have the same structure, although the names of
their attributes are different because they come from the same flat
table and the field names cannot be repeated in the same table.</p>
<p>The instances of the tables of dimensions and facts of the star
database are shown below.</p>
<table style="width:61%;" class="table">
<colgroup>
<col width="15%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="21%">
<col width="26%">
<col width="26%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_available_key</th>
<th align="center">data_availability_year</th>
<th align="center">data_availability_week</th>
<th align="center">data_availability_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
</tbody>
</table>
<table style="width:99%;" class="table">
<colgroup>
<col width="27%">
<col width="23%">
<col width="23%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="center">when_received_key</th>
<th align="center">reception_year</th>
<th align="center">reception_week</th>
<th align="center">reception_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
</tbody>
</table>
<table style="width:58%;" class="table">
<colgroup>
<col width="16%">
<col width="12%">
<col width="11%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">where_key</th>
<th align="center">region</th>
<th align="center">state</th>
<th align="center">city</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="8%">
<col width="17%">
<col width="16%">
<col width="9%">
<col width="26%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">when_available_key</th>
<th align="center">when_received_key</th>
<th align="center">where_key</th>
<th align="center">pneumonia_and_influenza_deaths</th>
<th align="center">all_deaths</th>
<th align="center">nrow_agg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">46</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">54</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">4</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">43</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">5</td>
<td align="center">3</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">27</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">5</td>
<td align="center">5</td>
<td align="center">3</td>
<td align="center">11</td>
<td align="center">270</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">6</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">46</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">7</td>
<td align="center">6</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">40</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">7</td>
<td align="center">7</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">47</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">8</td>
<td align="center">6</td>
<td align="center">3</td>
<td align="center">12</td>
<td align="center">285</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">63</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>We observe that each of the <em>when</em> dimensions (<em>when</em>,
<em>when_available</em>, <em>when_received</em>) has its own set of
instances, exclusively those necessary for the concept they
represent.</p>
</div>
<div class="section level3">
<h3 id="star-database-with-a-role-playing-dimension-and-role-dimensions">Star database with a role-playing dimension and role dimensions<a class="anchor" aria-label="anchor" href="#star-database-with-a-role-playing-dimension-and-role-dimensions"></a>
</h3>
<p>In the star database, we can define that any one of the dimensions is
the role-playing dimension and the other dimensions are various roles of
that dimension. The only requirement is that all dimensions must have
the same number of attributes. This definition is shown below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_1</span> <span class="op">&lt;-</span> <span class="va">db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/role_playing_dimension.html">role_playing_dimension</a></span><span class="op">(</span></span>
<span>    rpd <span class="op">=</span> <span class="st">"when"</span>,</span>
<span>    roles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"when_available"</span>, <span class="st">"when_received"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The result can be seen in the instances of the star database tables,
below.</p>
<table style="width:61%;" class="table">
<colgroup>
<col width="15%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="21%">
<col width="26%">
<col width="26%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_available_key</th>
<th align="center">data_availability_year</th>
<th align="center">data_availability_week</th>
<th align="center">data_availability_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:99%;" class="table">
<colgroup>
<col width="27%">
<col width="23%">
<col width="23%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="center">when_received_key</th>
<th align="center">reception_year</th>
<th align="center">reception_week</th>
<th align="center">reception_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:58%;" class="table">
<colgroup>
<col width="16%">
<col width="12%">
<col width="11%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">where_key</th>
<th align="center">region</th>
<th align="center">state</th>
<th align="center">city</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="8%">
<col width="17%">
<col width="16%">
<col width="9%">
<col width="26%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">when_available_key</th>
<th align="center">when_received_key</th>
<th align="center">where_key</th>
<th align="center">pneumonia_and_influenza_deaths</th>
<th align="center">all_deaths</th>
<th align="center">nrow_agg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">6</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">46</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">5</td>
<td align="center">5</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">54</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">8</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">43</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">9</td>
<td align="center">5</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">27</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">9</td>
<td align="center">7</td>
<td align="center">3</td>
<td align="center">11</td>
<td align="center">270</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">11</td>
<td align="center">10</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">46</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">13</td>
<td align="center">10</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">40</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">13</td>
<td align="center">12</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">47</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">14</td>
<td align="center">10</td>
<td align="center">3</td>
<td align="center">12</td>
<td align="center">285</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">63</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>We can see that the tables associated with the <em>when</em>
dimension contain the same instances and the fact table has been updated
appropriately.</p>
<p>In this example, the field names have been preserved, but surely we
may want all tables to have the same field names, except for the
surrogate key. This can be easily achieved by indicating that we want
the names of the fields of the role-playing dimension or by indicating
new names in the function. The first alternative is shown below, using
the <code>rpd_att_names</code> parameter.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_2</span> <span class="op">&lt;-</span> <span class="va">db</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/role_playing_dimension.html">role_playing_dimension</a></span><span class="op">(</span></span>
<span>    rpd <span class="op">=</span> <span class="st">"when"</span>,</span>
<span>    roles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"when_available"</span>, <span class="st">"when_received"</span><span class="op">)</span>,</span>
<span>    rpd_att_names <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>In this case, the schema is displayed as the result since the content
of the tables is the same.</p>
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2576db95cb84ea0d5969" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-2576db95cb84ea0d5969">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"mrs_cause\" [id = \"mrs_cause\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_cause<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_available_key\">when_available_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_received_key\">when_received_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">pneumonia_and_influenza_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">all_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when\" [id = \"when\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_key\"><U>when_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_available\" [id = \"when_available\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_available<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_available_key\"><U>when_available_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_received\" [id = \"when_received\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_received<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_received_key\"><U>when_received_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"where\" [id = \"where\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">where<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"where_key\"><U>where_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">region<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"mrs_cause\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_cause_1\"]\n\"mrs_cause\":\"when_available_key\"->\"when_available\":\"when_available_key\" [id=\"mrs_cause_2\"]\n\"mrs_cause\":\"when_received_key\"->\"when_received\":\"when_received_key\" [id=\"mrs_cause_3\"]\n\"mrs_cause\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_cause_4\"]\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script><p>The physical tables are kept in the star database but we work with a
RDBMS and we want to work with only one physical table for the
dimension, the rest of the tables can be easily defined by views.</p>
</div>
</div>
<div class="section level2">
<h2 id="role-playing-and-role-dimensions-in-a-constellation">Role-playing and role dimensions in a constellation<a class="anchor" aria-label="anchor" href="#role-playing-and-role-dimensions-in-a-constellation"></a>
</h2>
<p>With several star databases we can define a constellation where stars
can share dimensions. Common dimensions must have the same name and
structure. In the case of having role-playing dimensions and role
dimensions, this must be taken into account since the shared dimensions
must be transformed into conformed dimensions, but the package takes
care of this automatically, as we will see below.</p>
<div class="section level3">
<h3 id="second-star-database">Second star database<a class="anchor" aria-label="anchor" href="#second-star-database"></a>
</h3>
<p>We start with a similar dataset, with dates added to the original
dataset, as shown below.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="7%">
<col width="7%">
<col width="7%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="3%">
<col width="3%">
<col width="9%">
<col width="4%">
<col width="3%">
<col width="6%">
<col width="6%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="center">Arrival Year</th>
<th align="center">Arrival Week</th>
<th align="center">Arrival Date</th>
<th align="center">Data Availability Year</th>
<th align="center">Data Availability Week</th>
<th align="center">Data Availability Date</th>
<th align="center">Year</th>
<th align="center">WEEK</th>
<th align="center">Week Ending Date</th>
<th align="center">REGION</th>
<th align="center">State</th>
<th align="center">City</th>
<th align="center">Age Range</th>
<th align="center">Deaths</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
<td align="center">65+ years</td>
<td align="center">23</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
<td align="center">25-44 years</td>
<td align="center">8</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">&lt;1 year</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
<td align="center">45-64 years</td>
<td align="center">15</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">25-44 years</td>
<td align="center">5</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">25-44 years</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">1-24 years</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
<td align="center">65+ years</td>
<td align="center">142</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
<td align="center">45-64 years</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
<td align="center">1-24 years</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
<td align="center">65+ years</td>
<td align="center">25</td>
</tr>
<tr class="even">
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
<td align="center">45-64 years</td>
<td align="center">85</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">ft_age_rpd</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; c("Arrival Year", "Arrival Week", "Arrival Date", "Data Availability Year", </span></span>
<span><span class="co">#&gt; "Data Availability Week", "Data Availability Date", "Year", "WEEK", </span></span>
<span><span class="co">#&gt; "Week Ending Date", "REGION", "State", "City", "Age Range", "Deaths"</span></span>
<span><span class="co">#&gt; )</span></span></code></pre></div>
<p>The definition of the star schema is shown below.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/star_schema.html">star_schema</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_facts.html">define_facts</a></span><span class="op">(</span><span class="fu"><a href="../reference/fact_schema.html">fact_schema</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"MRS Age"</span>,</span>
<span>    measures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Deaths"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="va">when</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="va">when_available</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="fu"><a href="../reference/dimension_schema.html">dimension_schema</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"When Arrived"</span>,</span>
<span>    attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Arrival Year"</span>,</span>
<span>      <span class="st">"Arrival Week"</span>,</span>
<span>      <span class="st">"Arrival Date"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="fu"><a href="../reference/dimension_schema.html">dimension_schema</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Who"</span>,</span>
<span>    attributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Age Range"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_dimension.html">define_dimension</a></span><span class="op">(</span><span class="va">where</span><span class="op">)</span></span></code></pre></div>
<p>We have reused the definitions of the <em>When</em> and <em>When
Available</em> dimensions from the previous schema. A new dimension
<em>When Arrived</em> has been added with different names in order to
show how the definition works.</p>
<p>The definition of the star database is shown below.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/star_database.html">star_database</a></span><span class="op">(</span><span class="va">s_2</span>, <span class="va">ft_age_rpd</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/role_playing_dimension.html">role_playing_dimension</a></span><span class="op">(</span></span>
<span>    rpd <span class="op">=</span> <span class="st">"When Arrived"</span>,</span>
<span>    roles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"When Available"</span><span class="op">)</span>,</span>
<span>    att_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>, <span class="st">"Week"</span>, <span class="st">"Week Ending Date"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/snake_case.html">snake_case</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In this case, a role-playing dimension and a role dimension have been
defined. The <em>When</em> dimension has not been included in this
definition also to show how the system works.</p>
<p>The tables of the new star database are shown below.</p>
<table style="width:61%;" class="table">
<colgroup>
<col width="15%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:75%;" class="table">
<colgroup>
<col width="29%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_available_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="even">
<td align="center">16</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
</tr>
<tr class="odd">
<td align="center">17</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
</tr>
<tr class="even">
<td align="center">18</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
</tr>
</tbody>
</table>
<table style="width:72%;" class="table">
<colgroup>
<col width="26%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_arrived_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="even">
<td align="center">16</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
</tr>
<tr class="odd">
<td align="center">17</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
</tr>
<tr class="even">
<td align="center">18</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
</tr>
</tbody>
</table>
<table style="width:33%;" class="table">
<colgroup>
<col width="13%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="center">who_key</th>
<th align="center">age_range</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1-24 years</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">25-44 years</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">45-64 years</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">65+ years</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">&lt;1 year</td>
</tr>
</tbody>
</table>
<table style="width:58%;" class="table">
<colgroup>
<col width="16%">
<col width="12%">
<col width="11%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">where_key</th>
<th align="center">region</th>
<th align="center">state</th>
<th align="center">city</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="11%">
<col width="22%">
<col width="20%">
<col width="10%">
<col width="12%">
<col width="9%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">when_available_key</th>
<th align="center">when_arrived_key</th>
<th align="center">who_key</th>
<th align="center">where_key</th>
<th align="center">deaths</th>
<th align="center">nrow_agg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">3</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">5</td>
<td align="center">4</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">25</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">7</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">10</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">8</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">9</td>
<td align="center">8</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">15</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">9</td>
<td align="center">8</td>
<td align="center">4</td>
<td align="center">4</td>
<td align="center">23</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">13</td>
<td align="center">11</td>
<td align="center">4</td>
<td align="center">3</td>
<td align="center">142</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">14</td>
<td align="center">12</td>
<td align="center">5</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">17</td>
<td align="center">15</td>
<td align="center">3</td>
<td align="center">3</td>
<td align="center">85</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">18</td>
<td align="center">16</td>
<td align="center">3</td>
<td align="center">4</td>
<td align="center">8</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">18</td>
<td align="center">17</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">5</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>It can be seen that the When dimension is independent, it does not
have the same instances as the other dimensions.</p>
</div>
<div class="section level3">
<h3 id="constellation">Constellation<a class="anchor" aria-label="anchor" href="#constellation"></a>
</h3>
<p>The definition of the constellation is shown below.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/constellation.html">constellation</a></span><span class="op">(</span><span class="st">"MRS"</span>, <span class="va">db_2</span>, <span class="va">db_3</span><span class="op">)</span></span></code></pre></div>
<p>Below we can see the graphic representation of the tables that
compose it.</p>
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b78689c74ab2acd96705" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-b78689c74ab2acd96705">{"x":{"diagram":"#data_model\ndigraph {\ngraph [rankdir=LR tooltip=\"Data Model\" ]\n\nnode [margin=0 fontcolor = \"#444444\" ]\n\nedge [color = \"#555555\", arrowsize = 1, ]\n\npack=true\npackmode= \"node\"\n\n  \"mrs_age\" [id = \"mrs_age\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_age<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_available_key\">when_available_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_arrived_key\">when_arrived_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"who_key\">who_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"mrs_cause\" [id = \"mrs_cause\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#00005CAA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#00008BFF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">mrs_cause<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_key\">when_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_available_key\">when_available_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"when_received_key\">when_received_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\" PORT=\"where_key\">where_key<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">pneumonia_and_influenza_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">all_deaths<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCCCE7FF\">nrow_agg<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when\" [id = \"when\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_key\"><U>when_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_arrived\" [id = \"when_arrived\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_arrived<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_arrived_key\"><U>when_arrived_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_available\" [id = \"when_available\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_available<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_available_key\"><U>when_available_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"when_received\" [id = \"when_received\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">when_received<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"when_received_key\"><U>when_received_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">year<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">week_ending_date<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"where\" [id = \"where\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">where<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"where_key\"><U>where_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">region<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">state<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">city<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n  \"who\" [id = \"who\", label = <<TABLE ALIGN=\"LEFT\" BORDER=\"1\" CELLBORDER=\"0\" CELLSPACING=\"0\" COLOR=\"#004200AA\">\n    <TR>\n      <TD COLSPAN=\"1\" BGCOLOR=\"#006400FF\" BORDER=\"0\"><FONT COLOR=\"#FFFFFF\">who<\/FONT>\n<\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\" PORT=\"who_key\"><U>who_key<\/U><\/TD>\n    <\/TR>\n    <TR>\n      <TD ALIGN=\"LEFT\" BGCOLOR=\"#CCE0CCFF\">age_range<\/TD>\n    <\/TR>\n  <\/TABLE>>, shape = \"plaintext\"] \n\n\"mrs_cause\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_cause_1\"]\n\"mrs_age\":\"when_key\"->\"when\":\"when_key\" [id=\"mrs_age_1\"]\n\"mrs_age\":\"when_arrived_key\"->\"when_arrived\":\"when_arrived_key\" [id=\"mrs_age_2\"]\n\"mrs_cause\":\"when_available_key\"->\"when_available\":\"when_available_key\" [id=\"mrs_cause_2\"]\n\"mrs_age\":\"when_available_key\"->\"when_available\":\"when_available_key\" [id=\"mrs_age_3\"]\n\"mrs_cause\":\"when_received_key\"->\"when_received\":\"when_received_key\" [id=\"mrs_cause_3\"]\n\"mrs_cause\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_cause_4\"]\n\"mrs_age\":\"where_key\"->\"where\":\"where_key\" [id=\"mrs_age_4\"]\n\"mrs_age\":\"who_key\"->\"who\":\"who_key\" [id=\"mrs_age_5\"]\n}","config":{"engine":null,"options":null}},"evals":[],"jsHooks":[]}</script><p>The situation is that the <em>When</em> dimension in this second star
database is independent of the other dimensions, but it is a common
dimension with the first star database: it has to be a conformed
dimension.</p>
<p>Below are the instances of the tables to better appreciate the
result.</p>
<table style="width:61%;" class="table">
<colgroup>
<col width="15%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
</tr>
<tr class="even">
<td align="center">16</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">17</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
</tr>
<tr class="even">
<td align="center">18</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
</tr>
<tr class="odd">
<td align="center">19</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
</tr>
<tr class="even">
<td align="center">20</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
</tr>
<tr class="odd">
<td align="center">21</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="even">
<td align="center">22</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
</tr>
<tr class="odd">
<td align="center">23</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
</tr>
<tr class="odd">
<td align="center">25</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:72%;" class="table">
<colgroup>
<col width="26%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_arrived_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
</tr>
<tr class="even">
<td align="center">16</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">17</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
</tr>
<tr class="even">
<td align="center">18</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
</tr>
<tr class="odd">
<td align="center">19</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
</tr>
<tr class="even">
<td align="center">20</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
</tr>
<tr class="odd">
<td align="center">21</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="even">
<td align="center">22</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
</tr>
<tr class="odd">
<td align="center">23</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
</tr>
<tr class="odd">
<td align="center">25</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:75%;" class="table">
<colgroup>
<col width="29%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_available_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
</tr>
<tr class="even">
<td align="center">16</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">17</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
</tr>
<tr class="even">
<td align="center">18</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
</tr>
<tr class="odd">
<td align="center">19</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
</tr>
<tr class="even">
<td align="center">20</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
</tr>
<tr class="odd">
<td align="center">21</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="even">
<td align="center">22</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
</tr>
<tr class="odd">
<td align="center">23</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
</tr>
<tr class="odd">
<td align="center">25</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:74%;" class="table">
<colgroup>
<col width="27%">
<col width="9%">
<col width="9%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="center">when_received_key</th>
<th align="center">year</th>
<th align="center">week</th>
<th align="center">week_ending_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1962</td>
<td align="center">1</td>
<td align="center">1962-01-06</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-14</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1962</td>
<td align="center">11</td>
<td align="center">1962-03-15</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-11</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1962</td>
<td align="center">2</td>
<td align="center">1962-01-13</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-15</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-16</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-17</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">1962</td>
<td align="center">3</td>
<td align="center">1962-01-18</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-27</td>
</tr>
<tr class="odd">
<td align="center">11</td>
<td align="center">1962</td>
<td align="center">4</td>
<td align="center">1962-01-28</td>
</tr>
<tr class="even">
<td align="center">12</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-01-29</td>
</tr>
<tr class="odd">
<td align="center">13</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-01</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">1962</td>
<td align="center">5</td>
<td align="center">1962-02-03</td>
</tr>
<tr class="odd">
<td align="center">15</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-05</td>
</tr>
<tr class="even">
<td align="center">16</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-07</td>
</tr>
<tr class="odd">
<td align="center">17</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-08</td>
</tr>
<tr class="even">
<td align="center">18</td>
<td align="center">1962</td>
<td align="center">6</td>
<td align="center">1962-02-11</td>
</tr>
<tr class="odd">
<td align="center">19</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-14</td>
</tr>
<tr class="even">
<td align="center">20</td>
<td align="center">1962</td>
<td align="center">7</td>
<td align="center">1962-02-17</td>
</tr>
<tr class="odd">
<td align="center">21</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-24</td>
</tr>
<tr class="even">
<td align="center">22</td>
<td align="center">1962</td>
<td align="center">8</td>
<td align="center">1962-02-25</td>
</tr>
<tr class="odd">
<td align="center">23</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-02-26</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-01</td>
</tr>
<tr class="odd">
<td align="center">25</td>
<td align="center">1962</td>
<td align="center">9</td>
<td align="center">1962-03-03</td>
</tr>
</tbody>
</table>
<table style="width:58%;" class="table">
<colgroup>
<col width="16%">
<col width="12%">
<col width="11%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="center">where_key</th>
<th align="center">region</th>
<th align="center">state</th>
<th align="center">city</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Bridgeport</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">CT</td>
<td align="center">Hartford</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Boston</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">1</td>
<td align="center">MA</td>
<td align="center">Cambridge</td>
</tr>
</tbody>
</table>
<table style="width:33%;" class="table">
<colgroup>
<col width="13%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="center">who_key</th>
<th align="center">age_range</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">1-24 years</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">25-44 years</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">45-64 years</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">65+ years</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">&lt;1 year</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="8%">
<col width="17%">
<col width="16%">
<col width="9%">
<col width="26%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">when_available_key</th>
<th align="center">when_received_key</th>
<th align="center">where_key</th>
<th align="center">pneumonia_and_influenza_deaths</th>
<th align="center">all_deaths</th>
<th align="center">nrow_agg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">6</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">46</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">5</td>
<td align="center">5</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">54</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">8</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">43</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">9</td>
<td align="center">5</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">27</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">9</td>
<td align="center">7</td>
<td align="center">3</td>
<td align="center">11</td>
<td align="center">270</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">11</td>
<td align="center">10</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">46</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">13</td>
<td align="center">10</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">40</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">13</td>
<td align="center">12</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">47</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">16</td>
<td align="center">10</td>
<td align="center">3</td>
<td align="center">12</td>
<td align="center">285</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">25</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">63</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="11%">
<col width="22%">
<col width="20%">
<col width="10%">
<col width="12%">
<col width="9%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">when_key</th>
<th align="center">when_available_key</th>
<th align="center">when_arrived_key</th>
<th align="center">who_key</th>
<th align="center">where_key</th>
<th align="center">deaths</th>
<th align="center">nrow_agg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">5</td>
<td align="center">5</td>
<td align="center">5</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">11</td>
<td align="center">10</td>
<td align="center">4</td>
<td align="center">1</td>
<td align="center">25</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">10</td>
<td align="center">13</td>
<td align="center">12</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">16</td>
<td align="center">10</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">8</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">15</td>
<td align="center">14</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">15</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">15</td>
<td align="center">14</td>
<td align="center">4</td>
<td align="center">4</td>
<td align="center">23</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">14</td>
<td align="center">19</td>
<td align="center">17</td>
<td align="center">4</td>
<td align="center">3</td>
<td align="center">142</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">14</td>
<td align="center">20</td>
<td align="center">18</td>
<td align="center">5</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">21</td>
<td align="center">23</td>
<td align="center">21</td>
<td align="center">3</td>
<td align="center">3</td>
<td align="center">85</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">21</td>
<td align="center">24</td>
<td align="center">22</td>
<td align="center">3</td>
<td align="center">4</td>
<td align="center">8</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">21</td>
<td align="center">24</td>
<td align="center">23</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">25</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">2</td>
<td align="center">5</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>We can see that all the tables with information related to
<em>When</em> dimension have the same instances, including all the
instances of both star databases. In this example, the dimension
attributes have been renamed.</p>
<p>The definition of the role-playing dimension and the role dimensions
have been updated when integrating the two star databases. It can be
queried using the following function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ct</span>  <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/get_role_playing_dimension_names.html">get_role_playing_dimension_names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $rpd_1</span></span>
<span><span class="co">#&gt; [1] "when"           "when_arrived"   "when_available" "when_received"</span></span></code></pre></div>
<p>The role-playing and role dimensions that share instances are
displayed.</p>
</div>
</div>
<div class="section level2">
<h2 id="conclusions">Conclusions<a class="anchor" aria-label="anchor" href="#conclusions"></a>
</h2>
<p>The <code>rolap</code> package supports the definition of
role-playing and role dimensions in star databases. In this way, the
result can be exported to a RDBMS where we can define the dimensions as
independent tables or as views of a single physical table, as we need or
prefer.</p>
<p>The definition of role-playing and role dimensions is propagated from
star databases to constellations, allowing to integrate various
definitions into a common one.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jose Samos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
