<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Define geoattribute of a dimension — define_geoattribute • rolap</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define geoattribute of a dimension — define_geoattribute"><meta name="description" content="Define a set of attributes as a dimension's geoattribute. The set of attribute
values must uniquely designate the instances of the given geographic layer."><meta property="og:description" content="Define a set of attributes as a dimension's geoattribute. The set of attribute
values must uniquely designate the instances of the given geographic layer."><meta property="og:image" content="https://josesamos.github.io/rolap/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rolap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.5.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rolap.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v05-flat-table-op.html">Obtaining and transforming flat tables</a></li>
    <li><a class="dropdown-item" href="../articles/v10-rpd.html">Definition of role-playing and role dimensions</a></li>
    <li><a class="dropdown-item" href="../articles/v40-refresh.html">Incremental refresh of star databases</a></li>
    <li><a class="dropdown-item" href="../articles/v50-deploy.html">Deployment of star databases with incremental refresh</a></li>
    <li><a class="dropdown-item" href="../articles/v60-export.html">Star Database Export Features</a></li>
    <li><a class="dropdown-item" href="../articles/v70-star_query.html">Performing Multidimensional Queries (also Including Geographic Attributes)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/josesamos/rolap/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Define <code>geoattribute</code> of a dimension</h1>
      <small class="dont-index">Source: <a href="https://github.com/josesamos/rolap/blob/master/R/geoattribute.R" class="external-link"><code>R/geoattribute.R</code></a></small>
      <div class="d-none name"><code>define_geoattribute.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Define a set of attributes as a dimension's <code>geoattribute</code>. The set of attribute
values must uniquely designate the instances of the given geographic layer.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">define_geoattribute</span><span class="op">(</span><span class="va">db</span>, <span class="va">dimension</span>, <span class="va">attribute</span>, <span class="va">from_layer</span>, <span class="va">by</span>, <span class="va">from_attribute</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'star_database'</span></span>
<span><span class="fu">define_geoattribute</span><span class="op">(</span></span>
<span>  <span class="va">db</span>,</span>
<span>  dimension <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attribute <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_attribute <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-db">db<a class="anchor" aria-label="anchor" href="#arg-db"></a></dt>
<dd><p>A <code>star_database</code> object.</p></dd>


<dt id="arg-dimension">dimension<a class="anchor" aria-label="anchor" href="#arg-dimension"></a></dt>
<dd><p>A string, dimension name.</p></dd>


<dt id="arg-attribute">attribute<a class="anchor" aria-label="anchor" href="#arg-attribute"></a></dt>
<dd><p>A vector, attribute names.</p></dd>


<dt id="arg-from-layer">from_layer<a class="anchor" aria-label="anchor" href="#arg-from-layer"></a></dt>
<dd><p>A <code>sf</code> object.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>a vector of correspondence of attributes of the dimension with the
<code>sf</code> layer structure.</p></dd>


<dt id="arg-from-attribute">from_attribute<a class="anchor" aria-label="anchor" href="#arg-from-attribute"></a></dt>
<dd><p>A vector, attribute names.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>star_database</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The definition can be done in two ways: Associates the instances of the attributes
with the instances of a geographic layer or defines it from the geometry of
previously defined geographic attributes.</p>
<p>Multiple attributes can be specified in the <code>attribute</code> parameter, the geographical
attribute is the combination of all of them.</p>
<p>If defined from a layer (<code>from_layer</code> parameter), additionally the attributes
used for the join between the tables (dimension and layer tables) must be
indicated (<code>by</code> parameter).</p>
<p>If defined from another attribute, it should have the same or finer granularity,
to obtain the result by grouping its instances. The considered attribute can be
the pair that defines longitude and latitude.</p>
<p>If other geographic information has previously been associated with that attribute,
the new information is considered and previous instances for which no new information
is provided are also added.</p>
<p>If the geometry provided is polygons, a point layer is also generated.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other star database geographic attributes:
<code><a href="check_geoattribute_geometry.html">check_geoattribute_geometry</a>()</code>,
<code><a href="get_geoattribute_geometries.html">get_geoattribute_geometries</a>()</code>,
<code><a href="get_geoattributes.html">get_geoattributes</a>()</code>,
<code><a href="get_layer_geometry.html">get_layer_geometry</a>()</code>,
<code><a href="get_point_geometry.html">get_point_geometry</a>()</code>,
<code><a href="summarize_layer.html">summarize_layer</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="va">mrs_db</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">define_geoattribute</span><span class="op">(</span></span></span>
<span class="r-in"><span>    dimension <span class="op">=</span> <span class="st">"where"</span>,</span></span>
<span class="r-in"><span>    attribute <span class="op">=</span> <span class="st">"state"</span>,</span></span>
<span class="r-in"><span>    from_layer <span class="op">=</span> <span class="va">us_layer_state</span>,</span></span>
<span class="r-in"><span>    by <span class="op">=</span> <span class="st">"STUSPS"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">define_geoattribute</span><span class="op">(</span></span></span>
<span class="r-in"><span>    dimension <span class="op">=</span> <span class="st">"where"</span>,</span></span>
<span class="r-in"><span>    attribute <span class="op">=</span> <span class="st">"region"</span>,</span></span>
<span class="r-in"><span>    from_attribute <span class="op">=</span> <span class="st">"state"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>  <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">define_geoattribute</span><span class="op">(</span></span></span>
<span class="r-in"><span>    dimension <span class="op">=</span> <span class="st">"where"</span>,</span></span>
<span class="r-in"><span>    attribute <span class="op">=</span> <span class="st">"city"</span>,</span></span>
<span class="r-in"><span>    from_attribute <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jose Samos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

